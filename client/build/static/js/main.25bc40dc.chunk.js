(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{134:function(e,t,n){"use strict";n.r(t);var r,a,o,c=n(0),i=n.n(c),s=n(20),u=n.n(s),l=(n(79),n(2)),d=n.n(l),b=n(7),j=n(8),f=n(3),m=n(4),p=(n(81),n(18)),h=n(19),g=n(68),x=new(function(){function e(){Object(p.a)(this,e),this.socket=null}return Object(h.a)(e,[{key:"connect",value:function(e){var t=this;return new Promise((function(n,r){if(t.socket=Object(g.io)(e),!t.socket)return r();t.socket.on("connect",(function(){n(t.socket)})),t.socket.on("connect_error",(function(e){console.log("Connection error: ",e),r(e)}))}))}}]),e}()),O={isInRoom:!1,setInRoom:function(){},playerSymbol:"x",setPlayerSymbol:function(){},isPlayerTurn:!1,setPlayerTurn:function(){},isGameStarted:!1,setGameStarted:function(){}},v=i.a.createContext(O),y=new(function(){function e(){Object(p.a)(this,e)}return Object(h.a)(e,[{key:"joinGameRoom",value:function(){var e=Object(b.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){t.emit("join_game",{roomId:n}),t.on("room_joined",(function(){return e(!0)})),t.on("room_join_error",(function(e){var t=e.error;return r(t)}))})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateGame",value:function(){var e=Object(b.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.emit("update_game",{matrix:n});case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onGameUpdate",value:function(){var e=Object(b.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.on("on_game_update",(function(e){var t=e.matrix;return n(t)}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onStartGame",value:function(){var e=Object(b.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.on("start_game",n);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"gameWin",value:function(){var e=Object(b.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.emit("game_win",{message:n});case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onGameWin",value:function(){var e=Object(b.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.on("on_game_win",(function(e){var t=e.message;return n(t)}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}()),k=n(1),w=m.a.div(r||(r=Object(f.a)(["\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  margin-top: 2em;\n"]))),S=m.a.input(a||(a=Object(f.a)(["\n  height: 30px;\n  width: 20em;\n  font-size: 17px;\n  outline: none;\n  border: 1px solid #8e44ad;\n  border-radius: 3px;\n  padding: 0 10px;\n"]))),I=m.a.button(o||(o=Object(f.a)(["\n  outline: none;\n  background-color: #8e44ad;\n  color: #fff;\n  font-size: 17px;\n  border: 2px solid transparent;\n  border-radius: 5px;\n  padding: 4px 18px;\n  transition: all 230ms ease-in-out;\n  margin-top: 1em;\n  cursor: pointer;\n\n  &:hover {\n    background-color: transparent;\n    border: 2px solid #8e44ad;\n    color: #8e44ad;\n  }\n"])));function P(e){var t=Object(c.useState)(""),n=Object(j.a)(t,2),r=n[0],a=n[1],o=Object(c.useState)(!1),i=Object(j.a)(o,2),s=i[0],u=i[1],l=Object(c.useContext)(v),f=l.setInRoom,m=(l.isInRoom,function(){var e=Object(b.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=x.socket,r&&""!==r.trim()&&n){e.next=4;break}return e.abrupt("return");case 4:return u(!0),e.next=7,y.joinGameRoom(n,r).catch((function(e){alert(e)}));case 7:e.sent&&f(!0),u(!1);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());return Object(k.jsx)("form",{onSubmit:m,children:Object(k.jsxs)(w,{children:[Object(k.jsx)("h4",{children:"Enter Room ID to Join the Game"}),Object(k.jsx)(S,{placeholder:"Room ID",value:r,onChange:function(e){var t=e.target.value;a(t)}}),Object(k.jsx)(I,{type:"submit",disabled:s,children:s?"Joining...":"Join"})]})})}var G,T,N,_,C,R,E=n(34),K=m.a.div(G||(G=Object(f.a)(['\n  display: flex;\n  flex-direction: column;\n  font-family: "Zen Tokyo Zoo", cursive;\n  position: relative;\n']))),D=m.a.div(T||(T=Object(f.a)(["\n  width: 100%;\n  display: flex;\n"]))),W=m.a.div(N||(N=Object(f.a)(["\n  width: 13em;\n  height: 9em;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 20px;\n  cursor: pointer;\n  border-top: ",";\n  border-left: ",";\n  border-bottom: ",";\n  border-right: ",";\n  transition: all 270ms ease-in-out;\n\n  &:hover {\n    background-color: #8d44ad28;\n  }\n"])),(function(e){return e.borderTop&&"3px solid #8e44ad"}),(function(e){return e.borderLeft&&"3px solid #8e44ad"}),(function(e){return e.borderBottom&&"3px solid #8e44ad"}),(function(e){return e.borderRight&&"3px solid #8e44ad"})),F=m.a.div(_||(_=Object(f.a)(["\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  z-index: 99;\n  cursor: default;\n"]))),L=m.a.span(C||(C=Object(f.a)(['\n  font-size: 100px;\n  color: yellow;\n  &::after {\n    content: "X";\n  }\n']))),z=m.a.span(R||(R=Object(f.a)(['\n  font-size: 100px;\n  color: green;\n  &::after {\n    content: "O";\n  }\n'])));function B(){var e=Object(c.useState)([[null,null,null],[null,null,null],[null,null,null]]),t=Object(j.a)(e,2),n=t[0],r=t[1],a=Object(c.useContext)(v),o=a.playerSymbol,i=a.setPlayerSymbol,s=a.setPlayerTurn,u=a.isPlayerTurn,l=a.setGameStarted,d=a.isGameStarted,b=function(e){for(var t=0;t<e.length;t++){for(var n=[],r=0;r<e[t].length;r++)n.push(e[t][r]);if(n.every((function(e){return e&&e===o})))return[!0,!1];if(n.every((function(e){return e&&e!==o})))return[!1,!0]}for(var a=0;a<e.length;a++){for(var c=[],i=0;i<e[a].length;i++)c.push(e[i][a]);if(c.every((function(e){return e&&e===o})))return[!0,!1];if(c.every((function(e){return e&&e!==o})))return[!1,!0]}if(e[1][1]){if(e[0][0]===e[1][1]&&e[2][2]===e[1][1])return e[1][1]===o?[!0,!1]:[!1,!0];if(e[2][0]===e[1][1]&&e[0][2]===e[1][1])return e[1][1]===o?[!0,!1]:[!1,!0]}return e.every((function(e){return e.every((function(e){return null!==e}))}))?[!0,!0]:[!1,!1]};return Object(c.useEffect)((function(){x.socket&&y.onGameUpdate(x.socket,(function(e){r(e),b(e),s(!0)})),x.socket&&y.onStartGame(x.socket,(function(e){l(!0),i(e.symbol),e.start?s(!0):s(!1)})),x.socket&&y.onGameWin(x.socket,(function(e){console.log("Here",e),s(!1),alert(e)}))}),[]),Object(k.jsxs)(K,{children:[!d&&Object(k.jsx)("h2",{children:"Waiting for Other Player to Join to Start the Game!"}),(!d||!u)&&Object(k.jsx)(F,{}),n.map((function(e,t){return Object(k.jsx)(D,{children:e.map((function(e,a){return Object(k.jsx)(W,{borderRight:a<2,borderLeft:a>0,borderBottom:t<2,borderTop:t>0,onClick:function(){return function(e,t,a){var o=Object(E.a)(n);if(null!==o[t][e]&&"null"!==o[t][e]||(o[t][e]=a,r(o)),x.socket){y.updateGame(x.socket,o);var c=b(o),i=Object(j.a)(c,2),u=i[0],l=i[1];u&&l?(y.gameWin(x.socket,"The Game is a TIE!"),alert("The Game is a TIE!")):u&&!l&&(y.gameWin(x.socket,"You Lost!"),alert("You Won!")),s(!1)}}(a,t,o)},children:e&&"null"!==e?"x"===e?Object(k.jsx)(L,{}):Object(k.jsx)(z,{}):null})}))})}))]})}var U,J,M,q,Y,Z,A,H,X,Q,V=new(function(){function e(){Object(p.a)(this,e)}return Object(h.a)(e,[{key:"joinChatRoom",value:function(){var e=Object(b.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){t.emit("join_chat",{roomId:n}),t.on("chat_joined",(function(){return e(!0)})),t.on("chat_join_error",(function(e){var t=e.error;return r(t)}))})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"sendMessage",value:function(){var e=Object(b.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.emit("send_message",n);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"OnsendMessage",value:function(){var e=Object(b.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.on("new_send_message",n);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}()),$=(m.a.div(U||(U=Object(f.a)(["\n  width: 100%;\n  display: flex;\n"]))),m.a.div(J||(J=Object(f.a)(["\n    position: absolute;\n    bottom: 70px;\n"])))),ee=m.a.div(M||(M=Object(f.a)(["\n    padding-top: 50px;\n    padding-bottom: 50px;\n"]))),te=function(){console.log(x.socket);var e=Object(c.useState)(new Array),t=Object(j.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(""),o=Object(j.a)(a,2),i=o[0],s=o[1],u=x.socket;Object(c.useEffect)((function(){null!=u&&V.OnsendMessage(u,(function(e){return r([].concat(Object(E.a)(n),[e]))}))}));return Object(k.jsxs)("div",{children:[Object(k.jsx)(ee,{children:n.map((function(e,t){return Object(k.jsxs)("div",{children:[e.username,": ",e.message,Object(k.jsx)("div",{children:e.date.toDateString})]},t)}))}),Object(k.jsxs)($,{children:[Object(k.jsx)("input",{type:"text",value:i,onChange:function(e){return s(e.target.value)}}),Object(k.jsx)("button",{onClick:function(){var e=localStorage.getItem("registeredKey")||"";x.socket?V.sendMessage(x.socket,{message:i,username:e,date:new Date}):console.log("socket not connected")},children:"SEND"})]})]})},ne=n(23),re=n(74),ae=n(73),oe=(n(113),n(72)),ce=n.n(oe),ie=function(e){Object(re.a)(n,e);var t=Object(ae.a)(n);function n(e){var r;return Object(p.a)(this,n),(r=t.call(this,e)).errormsg=void 0,r.changeLogOut=function(){localStorage.removeItem("registeredKey"),r.setState({})},r.state={userName:"",Password:""},localStorage.setItem("registeredKey",""),r.changeUserName=r.changeUserName.bind(Object(ne.a)(r)),r.changePassword=r.changePassword.bind(Object(ne.a)(r)),r.onSubmit=r.onSubmit.bind(Object(ne.a)(r)),r.errormsg="",r}return Object(h.a)(n,[{key:"changeUserName",value:function(e){this.setState({userName:e.target.value})}},{key:"changePassword",value:function(e){this.setState({Password:e.target.value})}},{key:"onSubmit",value:function(e){var t=this;e.preventDefault();var n={userName:this.state.userName,Password:this.state.Password};ce.a.post("http://localhost:9000/signin",n).then((function(e){return t.errormsg=e.data.message})),localStorage.setItem("registeredKey",n.userName),this.setState({userName:"",Password:""})}},{key:"render",value:function(){return null===localStorage.getItem("registeredKey")&&""===localStorage.getItem("registeredKey")||localStorage.getItem("registeredKey").length>5&&(console.log(localStorage.getItem("registeredKey")),u.a.render(Object(k.jsx)(pe,{}),document.getElementById("root"))),Object(k.jsx)("div",{className:"bg-light",children:Object(k.jsx)("div",{className:"container",children:Object(k.jsx)("div",{className:"form-div",children:Object(k.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(k.jsx)("input",{type:"text",required:!0,placeholder:"Username",onChange:this.changeUserName,value:this.state.userName,className:"form-control form-group"}),Object(k.jsx)("input",{type:"password",required:!0,placeholder:"Password",onChange:this.changePassword,value:this.state.Password,className:"form-control form-group"}),Object(k.jsx)("div",{className:"d-grid gap-2 col-6 mx-auto",children:Object(k.jsx)("input",{type:"submit",className:"btn btn-success",value:"Submit/Register"})}),Object(k.jsx)("div",{className:"text-center text-danger h4",children:this.errormsg})]})})})})}},{key:"catch",value:function(e){e.response&&console.log(e.response.data)}}]),n}(c.Component),se=n(33),ue=n(5),le=m.a.div(q||(q=Object(f.a)(["\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 1em;\n"]))),de=m.a.h1(Y||(Y=Object(f.a)(["\n  margin: 0;\n  color: #8e44ad;\n  text-align: center;\n  padding-top: 50px;\n  padding-bottom: 50px;\n"]))),be=m.a.div(Z||(Z=Object(f.a)(["\n  margin-left: 160px;\n  padding: 0px 10px;\n"]))),je=m.a.div(A||(A=Object(f.a)(['\n  height: 100%; /* Full-height: remove this if you want "auto" height */\n  width: 350px; /* Set the width of the sidebar */\n  position: fixed; /* Fixed Sidebar (stay in place on scroll) */\n  z-index: 1; /* Stay on top */\n  top: 0; /* Stay at the top */\n  left: 0;\n  background-color: beige;\n  overflow-x: hidden; /* Disable horizontal scroll */\n  padding-top: 20px;\n']))),fe=m.a.div(H||(H=Object(f.a)(["\n  padding-top: 50px;\n  padding-bottom: 50px;\n"]))),me=m.a.div(X||(X=Object(f.a)(["\n  padding-top: 20px;\n  padding-bottom: 20px;\n  text-align: center; \n"])));m.a.div(Q||(Q=Object(f.a)(["\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"])));var pe=function e(){var t=Object(c.useState)(!1),n=Object(j.a)(t,2),r=n[0],a=n[1],o=Object(c.useState)("x"),i=Object(j.a)(o,2),s=i[0],l=i[1],f=Object(c.useState)(!1),m=Object(j.a)(f,2),p=m[0],h=m[1],g=Object(c.useState)(!1),O=Object(j.a)(g,2),y=O[0],w=O[1],S=function(){var e=Object(b.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.connect("http://localhost:9000").catch((function(e){console.log("Error: ",e)}));case 2:e.sent;case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){S()}),[]);var I={isInRoom:r,setInRoom:a,playerSymbol:s,setPlayerSymbol:l,isPlayerTurn:p,setPlayerTurn:h,isGameStarted:y,setGameStarted:w},G=function(){u.a.render(Object(k.jsx)(ie,{}),document.getElementById("root"))},T=function(){u.a.render(Object(k.jsx)(e,{}),document.getElementById("root"))},N=function(){return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsxs)(de,{children:["Welcome to Tic-Tac-Toe ",Object(k.jsx)("b",{children:"Guest"})]}),Object(k.jsx)(me,{children:Object(k.jsx)("button",{onClick:G,children:"Sign In"})})]})},_=function(){return r?Object(k.jsx)(C,{}):Object(k.jsx)(P,{})},C=function(){return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(be,{children:Object(k.jsx)(B,{})}),Object(k.jsx)(je,{children:Object(k.jsx)(te,{})})]})};return""===localStorage.getItem("registeredKey")||null===localStorage.getItem("registeredKey")?Object(k.jsx)(se.a,{children:Object(k.jsx)(ue.c,{children:Object(k.jsx)(ue.a,{path:"/",exact:!0,children:Object(k.jsx)(N,{})})})}):Object(k.jsx)(v.Provider,{value:I,children:Object(k.jsxs)(le,{children:[Object(k.jsxs)(de,{children:["Welcome to Tic-Tac-Toe ",Object(k.jsx)("b",{children:localStorage.getItem("registeredKey")})]}),Object(k.jsx)(fe,{children:Object(k.jsx)("button",{onClick:function(){localStorage.removeItem("registeredKey"),console.log("Logout attempt reached"),T()},children:"Log Out"})}),Object(k.jsx)(_,{})]})})},he=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,135)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,o=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),o(e),c(e)}))};u.a.render(Object(k.jsx)(i.a.StrictMode,{children:Object(k.jsx)(se.a,{children:Object(k.jsx)(pe,{})})}),document.getElementById("root")),he()},79:function(e,t,n){},81:function(e,t,n){}},[[134,1,2]]]);
//# sourceMappingURL=main.25bc40dc.chunk.js.map